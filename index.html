<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>a-eye-magic</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: radial-gradient(circle at center, #020812, #000);
  overflow: hidden;
}
canvas { display:block; }
</style>
</head>
<body>
<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

let w,h;
function resize(){
  w = canvas.width = innerWidth;
  h = canvas.height = innerHeight;
}
addEventListener("resize", resize);
resize();

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ TIME â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let T = 0;

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ PRESENCE â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const eye = {
  x: w * 0.5,
  y: h * 0.45,
  radius: 62,
  blink: 1,
  blinkTarget: 1,
  nextBlink: performance.now() + 6000 + Math.random()*6000
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ LETTER FIELD â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789?!@#$";
const letters = [];
const LETTER_COUNT = 36;

function initLetters(){
  letters.length = 0;
  for(let i=0;i<LETTER_COUNT;i++){
    letters.push({
      x: (Math.random()-0.5)*46,
      y: (Math.random()-0.5)*18,
      vx: (Math.random()-0.5)*0.6,
      vy: (Math.random()-0.5)*0.6,
      r: Math.random()*Math.PI*2,
      vr: (Math.random()-0.5)*0.04,
      ch: CHARS[Math.floor(Math.random()*CHARS.length)]
    });
  }
}
initLetters();

function scrambleLetters(){
  letters.forEach(l=>{
    l.vx += (Math.random()-0.5)*1.2;
    l.vy += (Math.random()-0.5)*1.2;
    l.vr += (Math.random()-0.5)*0.1;
    l.ch = CHARS[Math.floor(Math.random()*CHARS.length)];
  });
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ DRAW LETTER CHAOS (CLIPPED) â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function drawLetterEye(){
  ctx.save();
  ctx.translate(eye.x, eye.y);

  const rx = 46 * eye.blink;
  const ry = 18 * eye.blink;

  ctx.beginPath();
  ctx.ellipse(0,0,rx,ry,0,0,Math.PI*2);
  ctx.clip();

  ctx.font = "14px monospace";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";

  letters.forEach(l=>{
    l.x += l.vx;
    l.y += l.vy;
    l.r += l.vr;

    if(Math.abs(l.x) > rx){ l.vx *= -1; }
    if(Math.abs(l.y) > ry){ l.vy *= -1; }

    ctx.save();
    ctx.translate(l.x,l.y);
    ctx.rotate(l.r);
    ctx.fillStyle = "rgba(120,255,180,0.65)";
    ctx.fillText(l.ch,0,0);
    ctx.restore();
  });

  ctx.restore();
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ FRACTURED INNER BORDER (BLINK) â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function drawInnerBorder(){
  ctx.save();
  ctx.translate(eye.x, eye.y);

  const rx = 46 * eye.blink;
  const ry = 18 * eye.blink;
  const segments = 16;
  const baseRot = Math.sin(T*0.35)*0.2;

  ctx.rotate(baseRot);

  for(let i=0;i<segments;i++){
    if(Math.random()<0.35) continue;

    const a0 = (i/segments)*Math.PI*2;
    const a1 = a0 + (Math.PI*2/segments)*(0.45+Math.random()*0.4);

    ctx.beginPath();
    ctx.ellipse(
      0,0,
      rx + Math.sin(T+i)*1.2,
      ry + Math.cos(T+i)*1.0,
      0,
      a0,a1
    );
    ctx.strokeStyle = "rgba(120,255,180,0.5)";
    ctx.lineWidth = 1.5;
    ctx.shadowColor = "rgba(120,255,180,0.3)";
    ctx.shadowBlur = 10;
    ctx.stroke();
  }

  ctx.restore();
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ FRACTURED OUTER RING â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function drawOuterRing(){
  ctx.save();
  ctx.translate(eye.x, eye.y);

  const breathe = Math.sin(T * 0.6) * 6;
  const twist = Math.sin(T * 0.35) * 0.25;
  ctx.rotate(twist);

  const segments = 22;

  for(let i=0;i<segments;i++){
    if(Math.random()<0.38) continue;

    const a0 = (i/segments)*Math.PI*2;
    const a1 = a0 + (Math.PI*2/segments)*(0.5+Math.random()*0.5);

    ctx.beginPath();
    ctx.arc(
      0,0,
      eye.radius + breathe + Math.sin(T+i)*2,
      a0,a1
    );
    ctx.strokeStyle = "rgba(120,255,180,0.45)";
    ctx.lineWidth = 2;
    ctx.shadowColor = "rgba(120,255,180,0.35)";
    ctx.shadowBlur = 14;
    ctx.stroke();
  }

  ctx.restore();
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ LOOP â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function loop(){
  ctx.clearRect(0,0,w,h);
  T += 0.003;

  // blink timing
  if(performance.now()>eye.nextBlink && eye.blinkTarget===1){
    eye.blinkTarget = 0;
    scrambleLetters(); // spin ticket cage
  }
  if(eye.blinkTarget===0 && eye.blink<0.05){
    eye.blinkTarget = 1;
    eye.nextBlink = performance.now()+6000+Math.random()*6000;
  }
  eye.blink += (eye.blinkTarget-eye.blink)*0.08;

  drawLetterEye();     // ðŸŽŸ chaos
  drawInnerBorder();   // ðŸ‘ blinking line-art
  drawOuterRing();     // â­• containment

  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
