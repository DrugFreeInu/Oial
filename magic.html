<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>magic</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: radial-gradient(
    circle at center,
    #0b1f3a 0%,
    #08182e 45%,
    #050f22 75%,
    #030914 100%
  );
  overflow: hidden;
}
canvas {
  display: block;
}
</style>
</head>
<body>
<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

let w, h;
function resize(){
  w = canvas.width = innerWidth;
  h = canvas.height = innerHeight;
}
addEventListener("resize", resize);
resize();

/* ───────── TIME ───────── */
let T = 0;

/* ───────── CENTER FIELD ───────── */
const field = {
  x: () => w * 0.5,
  y: () => h * 0.5,
  baseR: Math.min(innerWidth, innerHeight) * 0.22
};

/* ───────── AIR (BREATHING SPACE) ───────── */
let air = {
  phase: Math.random() * Math.PI * 2,
  speed: 0.00032,
  depth: 0.08
};

function drawAir(){
  air.phase += air.speed;

  const inhale = (Math.sin(air.phase) + 1) * 0.5;
  const alpha = 0.03 + inhale * air.depth;
  const radius = field.baseR * (3.4 + inhale * 0.6);

  ctx.save();
  ctx.globalCompositeOperation = "lighter";
  ctx.fillStyle = `rgba(120,255,180,${alpha})`;
  ctx.beginPath();
  ctx.arc(field.x(), field.y(), radius, 0, Math.PI * 2);
  ctx.fill();
  ctx.restore();
}

/* ───────── PRESSURE (DIFFUSED BLOOM) ───────── */
let pressure = {
  phase: Math.random() * Math.PI * 2,
  speed: 0.00018
};

function drawPressure(){
  pressure.phase += pressure.speed;

  const wave = (Math.sin(pressure.phase) + 1) * 0.5;
  const radius = field.baseR * (2.8 + wave * 1.2);
  const alpha = 0.025 + wave * 0.055;

  ctx.save();
  ctx.globalCompositeOperation = "screen";

  const grad = ctx.createRadialGradient(
    field.x(), field.y(), field.baseR * 0.2,
    field.x(), field.y(), radius
  );

  grad.addColorStop(0, `rgba(120,255,180,${alpha})`);
  grad.addColorStop(1, `rgba(120,255,180,0)`);

  ctx.fillStyle = grad;
  ctx.beginPath();
  ctx.arc(field.x(), field.y(), radius, 0, Math.PI * 2);
  ctx.fill();
  ctx.restore();
}

/* ───────── MICRO DRIFT (SUB-PERCEPTUAL) ───────── */
let drift = {
  phase: Math.random() * Math.PI * 2
};

function applyDrift(){
  drift.phase += 0.00015;
  const dx = Math.sin(drift.phase) * 0.4;
  const dy = Math.cos(drift.phase * 0.9) * 0.4;
  ctx.translate(dx, dy);
}

/* ───────── LOOP ───────── */
function loop(){
  ctx.setTransform(1,0,0,1,0,0);
  ctx.clearRect(0,0,w,h);

  applyDrift();
  drawAir();
  drawPressure();

  T += 0.0015;
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
