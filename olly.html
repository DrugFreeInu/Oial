<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Olly — Afterglow</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: transparent;
  overflow: hidden;
}
canvas { display:block; }
</style>
</head>
<body>
<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

let w,h;
function resize(){
  w = canvas.width = innerWidth;
  h = canvas.height = innerHeight;
}
addEventListener("resize", resize);
resize();

/* ───────── CORE MOTION (BODY SHIFT) ───────── */
const core = {
  x: w*0.5,
  y: h*0.5,
  vx: 0,
  vy: 0
};

function push(){
  core.vx += (Math.random()-0.5) * 1.4;
  core.vy += (Math.random()-0.5) * 0.9;
}
let nextPush = performance.now() + 900;

/* ───────── PARTICLES (MANE / GRASS) ───────── */
const COUNT = 220;
const particles = [];

for(let i=0;i<COUNT;i++){
  particles.push({
    ox: (Math.random()-0.5) * Math.min(w,h)*0.22,
    oy: (Math.random()-0.5) * Math.min(w,h)*0.22,
    x: 0,
    y: 0,
    sway: Math.random()*Math.PI*2,
    len: 12 + Math.random()*26,
    alpha: 0.12 + Math.random()*0.18
  });
}

/* ───────── UPDATE ───────── */
function update(){
  if(performance.now() > nextPush){
    push();
    nextPush = performance.now() + 900 + Math.random()*1600;
  }

  core.vx *= 0.97;   // ← heavier inertia
  core.vy *= 0.97;

  const speed = Math.hypot(core.vx, core.vy);

  particles.forEach(p=>{
    p.sway += 0.04 + speed*0.14;

    const tx =
      p.ox +
      Math.sin(p.sway) * (1.6 + speed*3.2) +
      core.vx * 10;

    const ty =
      p.oy +
      Math.cos(p.sway*0.9) * (1.2 + speed*2.6) +
      core.vy * 10;

    // inertia / lag (important)
    p.x += (tx - p.x) * 0.12;
    p.y += (ty - p.y) * 0.12;
  });
}

/* ───────── DRAW WITH TRUE MOTION BLUR ───────── */
function draw(){
  // THIS IS THE KEY: fade, don't clear
  ctx.fillStyle = "rgba(255,255,255,0.06)"; 
  ctx.fillRect(0,0,w,h);

  ctx.save();
  ctx.translate(w*0.5, h*0.5);
  ctx.globalCompositeOperation = "multiply";

  particles.forEach(p=>{
    const grad = ctx.createLinearGradient(
      p.x, p.y,
      p.x, p.y + p.len*2
    );

    grad.addColorStop(0, `rgba(40,120,90,${p.alpha})`);
    grad.addColorStop(1, `rgba(40,120,90,0)`);

    ctx.strokeStyle = grad;
    ctx.lineWidth = 1.2;
    ctx.beginPath();
    ctx.moveTo(p.x, p.y);
    ctx.lineTo(p.x, p.y + p.len);
    ctx.stroke();
  });

  ctx.restore();
}

/* ───────── LOOP ───────── */
function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
